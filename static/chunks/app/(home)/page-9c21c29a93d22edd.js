(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{502:function(e,r,t){Promise.resolve().then(t.bind(t,7110))},9376:function(e,r,t){"use strict";var n=t(5475);t.o(n,"useRouter")&&t.d(r,{useRouter:function(){return n.useRouter}}),t.o(n,"useSearchParams")&&t.d(r,{useSearchParams:function(){return n.useSearchParams}})},257:function(e,r,t){"use strict";var n,a;e.exports=(null==(n=t.g.process)?void 0:n.env)&&"object"==typeof(null==(a=t.g.process)?void 0:a.env)?t.g.process:t(4227)},4227:function(e){!function(){var r={229:function(e){var r,t,n,a=e.exports={};function o(){throw Error("setTimeout has not been defined")}function s(){throw Error("clearTimeout has not been defined")}function l(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{t="function"==typeof clearTimeout?clearTimeout:s}catch(e){t=s}}();var i=[],c=!1,d=-1;function u(){c&&n&&(c=!1,n.length?i=n.concat(i):d=-1,i.length&&_())}function _(){if(!c){var e=l(u);c=!0;for(var r=i.length;r;){for(n=i,i=[];++d<r;)n&&n[d].run();d=-1,r=i.length}n=null,c=!1,function(e){if(t===clearTimeout)return clearTimeout(e);if((t===s||!t)&&clearTimeout)return t=clearTimeout,clearTimeout(e);try{t(e)}catch(r){try{return t.call(null,e)}catch(r){return t.call(this,e)}}}(e)}}function m(e,r){this.fun=e,this.array=r}function p(){}a.nextTick=function(e){var r=Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];i.push(new m(e,r)),1!==i.length||c||l(_)},m.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=p,a.addListener=p,a.once=p,a.off=p,a.removeListener=p,a.removeAllListeners=p,a.emit=p,a.prependListener=p,a.prependOnceListener=p,a.listeners=function(e){return[]},a.binding=function(e){throw Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw Error("process.chdir is not supported")},a.umask=function(){return 0}}},t={};function n(e){var a=t[e];if(void 0!==a)return a.exports;var o=t[e]={exports:{}},s=!0;try{r[e](o,o.exports,n),s=!1}finally{s&&delete t[e]}return o.exports}n.ab="//";var a=n(229);e.exports=a}()},7110:function(e,r,t){"use strict";t.r(r),t.d(r,{default:function(){return E}});var n=t(7437),a=t(2265),o=t(1068),s=t.n(o);let l=e=>{let{setSelectedOperator:r}=e,[t,o]=(0,a.useState)(null),l=e=>{o(e),r(e)};return(0,n.jsxs)("section",{className:s().Operadores,children:[(0,n.jsxs)("div",{className:s().Operadores__first,children:[(0,n.jsx)("h2",{children:"01"}),(0,n.jsx)("h3",{children:"Selecciona tu operador"})]}),(0,n.jsx)("div",{className:s().Operadores__line}),(0,n.jsx)("div",{className:s().Operadores__ops,children:[{name:"Claro",img:"/images/claro.png"},{name:"Movistar",img:"/images/movistar.png"},{name:"Tigo",img:"/images/tigo.png"},{name:"Virgin",img:"/images/virgin.png"},{name:"Wom",img:"/images/wom.png"}].map(e=>{let r=e.img;return(0,n.jsxs)("article",{className:e.name===t?"".concat(s().Operadores__selected," ").concat(s().Operadores__selectedText):"",onClick:()=>l(e.name),children:[(0,n.jsx)("img",{src:r,alt:e.name,loading:"eager"}),(0,n.jsx)("p",{className:e.name===t?s().Operadores__selectedText:"",children:e.name})]},e.name)})})]})};var i=t(4799),c=t.n(i);let d=e=>{let{setConsultationMethod:r,setInputValue:t,handleAddClick:o}=e,[s,l]=(0,a.useState)("referencia"),[i,d]=(0,a.useState)(""),[u,_]=(0,a.useState)(""),m=()=>{o(),_(" "),d(" "),l("referencia")},p=e=>{let t=e.target.value;l(t),r(t)};return(0,n.jsxs)("section",{className:c().ConsultaF,children:[(0,n.jsxs)("div",{className:c().ConsultaF__title,children:[(0,n.jsx)("h2",{children:"02"}),(0,n.jsx)("div",{className:c().ConsultaF__title__line}),(0,n.jsx)("h3",{children:"Selecciona el m\xe9todo de consulta de tu factura"})]}),(0,n.jsxs)("div",{className:c().ConsultaF__form,children:[(0,n.jsxs)("div",{className:c().ConsultaF__form__option,children:[(0,n.jsx)("input",{type:"radio",id:"referencia",name:"option",value:"referencia",checked:"referencia"===s,onChange:p}),(0,n.jsx)("label",{htmlFor:"referencia",children:"N\xfamero de referencia"}),(0,n.jsx)("input",{type:"text",placeholder:"Digita la referencia",value:i,onChange:e=>{let r=e.target.value;d(r),t(r)},disabled:"referencia"!==s}),(0,n.jsx)("button",{onClick:m,disabled:"referencia"!==s||!i.trim(),children:"Agregar"})]}),(0,n.jsxs)("div",{className:c().ConsultaF__form__option,children:[(0,n.jsx)("input",{type:"radio",id:"cellphone",name:"option",value:"Numero de Celular",checked:"Numero de Celular"===s,onChange:p}),(0,n.jsxs)("label",{htmlFor:"cellphone",children:["N\xfamero de celular",(0,n.jsx)("br",{}),(0,n.jsx)("small",{children:"(aplica para TIGO y WOM)"})]}),(0,n.jsx)("input",{type:"text",placeholder:"Numero de Celular",value:u,onChange:e=>{let r=e.target.value;_(r),t(r)},disabled:"Numero de Celular"!==s}),(0,n.jsx)("button",{onClick:m,disabled:"Numero de Celular"!==s||!u.trim(),children:"Agregar"})]})]})]})};var u=t(9089),_=t(5463),m=t.n(_),p=t(257);let h={MEGARED_TOKEN:p.env.MEGARED_QA_TOKEN||"",MEGARED_HOSTNAME:p.env.MEGARED_QA_HOSTNAME||"",MEGARED_VERSION:"2.0.3"},f={consult:"".concat(h.MEGARED_HOSTNAME,"/pay_invoices/consult/")},v=async(e,r,t,n)=>{try{let a=f.consult,o="Bearer "+h.MEGARED_TOKEN,s=h.MEGARED_VERSION,l=await fetch(a,{method:"POST",headers:{v:s,"Content-Type":"application/json",Authorization:o},body:JSON.stringify({barcode:e,reference:r,method:t,code_agreement:n})});if(!l.ok)throw Error("Error en la solicitud: ".concat(l.statusText));let i=await l.json();return console.log("Respuesta:",i),i}catch(e){console.error("Error:",e)}};var g=t(9376),x=t(1331),j=t.n(x);let O=()=>(0,n.jsx)("div",{className:j().LoaderWrapper,children:(0,n.jsxs)("div",{className:j().Loader,children:[(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{}),(0,n.jsx)("div",{})]})}),y=e=>{let{data:r,onEdit:t,onDelete:o,onAdd:s}=e,l=(0,g.useRouter)(),[i,c]=(0,a.useState)(!1),d={data:[],error:""},_={Claro:"1",Movistar:"2",Tigo:"3",Virgin:"4",Wom:"5"},p={Claro:"2",Movistar:"3",Tigo:"4",Virgin:"5",Wom:"6"},h=r.map(e=>{let r=e.operator;return{barcode:"reference"==e.method?"":e.value,reference:"reference"==e.method?e.value:"",method:"reference"==e.method?"MANUAL":"AUTOMATIC",code_agreement:"reference"==e.method?_[r]:p[r]}}),f=e=>new Promise(r=>setTimeout(r,e)),x=async()=>{c(!0);try{let e=h.map(e=>v(e.barcode,e.reference,e.method,e.code_agreement));await f(2e3);let r=await Promise.all(e);console.log("Resultados de todas las consultas:",r),d.data=d.data.filter(e=>void 0!==e),console.log(d)}catch(e){console.error("Error en la ejecuci\xf3n de consultas:",e),d.error=e}finally{console.log(r),c(!1),l.push("/descripcion?data=".concat(encodeURIComponent(JSON.stringify(r))))}},j=async()=>{await x()};return(0,n.jsx)("section",{className:m().ResumenF,children:i?(0,n.jsx)(O,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("h2",{children:"Resumen de facturas"}),(0,n.jsxs)("table",{children:[(0,n.jsx)("thead",{children:(0,n.jsxs)("tr",{children:[(0,n.jsx)("th",{children:"Operador"}),(0,n.jsx)("th",{children:"M\xe9todo de consulta"}),(0,n.jsx)("th",{children:"N\xfamero de consulta"}),(0,n.jsx)("th",{children:"Editar"}),(0,n.jsx)("th",{children:"Eliminar"})]})}),(0,n.jsx)("tbody",{children:r.map((e,r)=>(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.operator}),(0,n.jsx)("td",{children:e.method}),(0,n.jsx)("td",{children:e.value}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>t(r),children:(0,n.jsx)(u.fmQ,{})})}),(0,n.jsx)("td",{children:(0,n.jsx)("button",{onClick:()=>o(r),children:(0,n.jsx)(u.Xm5,{})})})]},r))})]}),(0,n.jsxs)("div",{className:m().ResumenF__actions,children:[(0,n.jsx)("button",{onClick:s,className:m().ResumenF__add,children:"+ Adicionar otra factura"}),(0,n.jsx)("button",{className:m().ResumenF__pay,onClick:j,children:"Pagar"})]})]})})};var b=t(8256),C=t.n(b);let N=e=>{let{factura:r,onSave:t,onClose:o}=e,[s,l]=(0,a.useState)((null==r?void 0:r.operator)||""),[i,c]=(0,a.useState)((null==r?void 0:r.method)||""),[d,u]=(0,a.useState)((null==r?void 0:r.value)||""),_=e=>{l(e)};return(0,n.jsx)("div",{className:C().Modal,children:(0,n.jsxs)("div",{className:C().Modal__content,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h2",{children:"Editar"}),(0,n.jsx)("h3",{children:"Operador"})]}),(0,n.jsx)("div",{className:C().Modal__Operadores,children:[{name:"Claro",img:"/images/claro.png"},{name:"Movistar",img:"/images/movistar.png"},{name:"Tigo",img:"/images/tigo.png"},{name:"Virgin",img:"/images/virgin.png"},{name:"Wom",img:"/images/wom.png"}].map(e=>{let r=e.img;return(0,n.jsxs)("article",{className:e.name===s?"".concat(C().Modal__selected," "):"",onClick:()=>_(e.name),children:[(0,n.jsx)("img",{src:r,alt:e.name,loading:"eager"}),(0,n.jsx)("p",{className:e.name===s?C().Operadores__selectedText:"",children:e.name})]},e.name)})}),(0,n.jsxs)("div",{className:C().Modal__Consulta,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"M\xe9todo de Consulta"}),(0,n.jsxs)("select",{value:i,onChange:e=>c(e.target.value),children:[(0,n.jsx)("option",{value:"Referencia",children:"Referencia"}),(0,n.jsx)("option",{value:"N\xfamero de Tel\xe9fono",children:"N\xfamero de Tel\xe9fono"})]})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{children:"N\xfamero de Consulta"}),(0,n.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value)})]})]}),(0,n.jsxs)("div",{className:C().Modal__actions,children:[(0,n.jsx)("button",{onClick:()=>{t({operator:s,method:i,value:d}),o()},children:"Guardar"}),(0,n.jsx)("button",{onClick:o,children:"Cancelar"})]})]})})};function E(){let[e,r]=(0,a.useState)(null),[t,o]=(0,a.useState)("reference"),[s,i]=(0,a.useState)(""),[c,u]=(0,a.useState)([]),[_,m]=(0,a.useState)(!1),[p,h]=(0,a.useState)(null);return(0,n.jsxs)("main",{children:[(0,n.jsx)(l,{setSelectedOperator:r}),(0,n.jsx)(d,{setConsultationMethod:o,setInputValue:i,handleAddClick:()=>{let r={operator:e,method:t,value:s};u(e=>[...e,r]),i("")}}),c.length>0?(0,n.jsx)(y,{data:c,onEdit:e=>{h(e),m(!0)},onDelete:e=>{u(c.filter((r,t)=>t!==e))},onAdd:()=>{h(null),m(!0)}}):(0,n.jsx)("br",{}),_&&(0,n.jsx)(N,{factura:null!=p?c[p]:null,onSave:e=>{if(null!=p){let r=c.map((r,t)=>t===p?e:r);console.log(r),u(r)}else u([...c,e]);m(!1)},onClose:()=>m(!1)})]})}},4799:function(e){e.exports={ConsultaF:"ConsultaFactura_ConsultaF__QK7EX",ConsultaF__title:"ConsultaFactura_ConsultaF__title__q9AIR",ConsultaF__title__line:"ConsultaFactura_ConsultaF__title__line__UWnZW",ConsultaF__form:"ConsultaFactura_ConsultaF__form__Qwa9N",ConsultaF__form__option:"ConsultaFactura_ConsultaF__form__option__EsbbU"}},8256:function(e){e.exports={Modal:"ModalEditar_Modal__RJ9NV",Modal__content:"ModalEditar_Modal__content__EoGS9",Modal__Operadores:"ModalEditar_Modal__Operadores__qIPeA",Modal__Consulta:"ModalEditar_Modal__Consulta__cEnpu",Modal__selected:"ModalEditar_Modal__selected__75CBz",Modal__actions:"ModalEditar_Modal__actions__t_tC8"}},1068:function(e){e.exports={Operadores:"Operadores_Operadores___0Kft",Operadores__first:"Operadores_Operadores__first___2I8Q",Operadores__line:"Operadores_Operadores__line__4CmO8",Operadores__ops:"Operadores_Operadores__ops__klCfV",Operadores__selected:"Operadores_Operadores__selected__MnY6z",Operadores__selectedText:"Operadores_Operadores__selectedText__pMZXy"}},5463:function(e){e.exports={ResumenF:"ResumenFactura_ResumenF__zyvbV",ResumenF__actions:"ResumenFactura_ResumenF__actions__CgrTH",ResumenF__add:"ResumenFactura_ResumenF__add__cZBra",ResumenF__pay:"ResumenFactura_ResumenF__pay__vBdZs"}},1331:function(e){e.exports={LoaderWrapper:"Loader_LoaderWrapper__u7dsY",Loader:"Loader_Loader__yckLY",loading:"Loader_loading__cQJyk"}},6231:function(e,r,t){"use strict";t.d(r,{w_:function(){return d}});var n=t(2265),a={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},o=n.createContext&&n.createContext(a),s=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])}return e}).apply(this,arguments)}function i(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),t.push.apply(t,n)}return t}function c(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{};r%2?i(Object(t),!0).forEach(function(r){var n,a;n=r,a=t[r],(n=function(e){var r=function(e,r){if("object"!=typeof e||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,r||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(e)}(e,"string");return"symbol"==typeof r?r:r+""}(n))in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))})}return e}function d(e){return r=>n.createElement(u,l({attr:c({},e.attr)},r),function e(r){return r&&r.map((r,t)=>n.createElement(r.tag,c({key:t},r.attr),e(r.child)))}(e.child))}function u(e){var r=r=>{var t,{attr:a,size:o,title:i}=e,d=function(e,r){if(null==e)return{};var t,n,a=function(e,r){if(null==e)return{};var t={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(r.indexOf(n)>=0)continue;t[n]=e[n]}return t}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)t=o[n],!(r.indexOf(t)>=0)&&Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}(e,s),u=o||r.size||"1em";return r.className&&(t=r.className),e.className&&(t=(t?t+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},r.attr,a,d,{className:t,style:c(c({color:e.color||r.color},r.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),i&&n.createElement("title",null,i),e.children)};return void 0!==o?n.createElement(o.Consumer,null,e=>r(e)):r(a)}}},function(e){e.O(0,[416,699,971,117,744],function(){return e(e.s=502)}),_N_E=e.O()}]);